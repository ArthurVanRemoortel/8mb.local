services:
  8mblocal:
    image: jms1717/8mblocal:latest
    container_name: 8mblocal
    ports:
      - "8001:8001"
    volumes:
      - ./uploads:/app/uploads
      - ./outputs:/app/outputs
      - ./.env:/app/.env  # optional custom settings
    environment:
      - REDIS_URL=redis://127.0.0.1:6379/0
    # Optional: enable NVIDIA GPU acceleration
    # environment:
    #   - NVIDIA_DRIVER_CAPABILITIES=compute,video,utility
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: all
    #           capabilities: [gpu]
    # Optional: enable VAAPI on Linux (Intel/AMD)
    # devices:
    #   - "/dev/dri:/dev/dri"
    restart: unless-stopped
